<!-- Static Task Item Partial (for non-Alpine.js templates)
     Parameters:
     - task: the task object
     - show_project: whether to show project in metadata (default true)
     - show_assignee: whether to show assignee in metadata (default true)
     - show_actions: whether to show action buttons (default true)
     - show_flag: whether to show flag button in actions (default true)
-->

<div class="task-item-compact" {% if task.is_complete %}class="task-item-compact task-completed"{% endif %}>
    <!-- Task checkbox -->
    <form method="POST" action="{{ url_for('complete_task', task_id=task.id) }}" class="task-checkbox-form">
        <button type="submit" class="task-checkbox {% if task.is_complete %}checked{% endif %}" title="{{ 'Mark Incomplete' if task.is_complete else 'Mark Complete' }}">
            {% if task.is_complete %}
            <i class="bi bi-check"></i>
            {% endif %}
        </button>
    </form>
    
    <!-- Task Content -->
    <div class="task-content-compact">
        <!-- Main task description -->
        <div class="task-description-main {% if task.is_complete %}completed-text{% endif %}">
            <a href="{{ url_for('task_detail', task_id=task.id) }}" class="text-decoration-none text-inherit">
                {{ task.description }}
            </a>
        </div>
        
        <!-- Metadata -->
        <div class="task-metadata">
            <!-- Project -->
            {% if show_project and task.project_name %}
            <span class="task-meta-item task-project-meta">
                <i class="bi bi-folder"></i>
                <span>{{ task.project_name }}{% if task.client_name %} ({{ task.client_name }}){% endif %}</span>
            </span>
            {% endif %}
            
            <!-- Assigned To -->
            {% if show_assignee and task.assigned_to_name %}
            <span class="task-meta-item task-assignee-meta">
                <i class="bi bi-person"></i>
                <span>Assigned to {{ task.assigned_to_name }}</span>
            </span>
            {% endif %}
            
            <!-- Date -->
            <span class="task-meta-item task-date-meta">{{ task.created_at[:10] }}</span>
        </div>
    </div>
    
    <!-- Action buttons -->
    {% if show_actions %}
    <div class="task-actions-compact">
        <!-- Flag/Unflag -->
        {% if show_flag %}
        <form action="/task/{{ task.id }}/{{ 'unflag' if task.is_flagged else 'flag' }}" method="POST" style="display: inline;">
            <button type="submit" class="task-action-btn-compact" title="{{ 'Unflag Task' if task.is_flagged else 'Flag Task' }}">
                <i class="bi bi-flag-fill {{ 'text-primary' if task.is_flagged else 'text-muted' }}"></i>
            </button>
        </form>
        {% endif %}
        <!-- Edit -->
        <button type="button" class="task-action-btn-compact" title="Edit Task" onclick="window.location.href='{{ url_for('task_detail', task_id=task.id) }}'">
            <i class="bi bi-pencil"></i>
        </button>
        <!-- Delete -->
        <form action="/task/{{ task.id }}/delete" method="POST" style="display: inline;">
            <button type="submit" class="task-action-btn-compact task-delete-btn" title="Delete Task">
                <i class="bi bi-trash"></i>
            </button>
        </form>
    </div>
    {% endif %}
</div> 